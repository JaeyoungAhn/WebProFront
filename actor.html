<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Hello, world!</title>
    
  </head>
  <style>
   .row {
       position:absolute;
   }
   body {
cursor: url("./heart.png"), auto;
        }
  </style>
  <script>
    var audio1 = new Audio('./ping.mp3');
    var audio2 = new Audio('./tada.mp3');
    currentorder=1;
    food = {}
    order=[];
    function chooseleft(event) {
        delnum=document.getElementById('right-name').name;
        choose(event);
      
       
    }
    function chooseright(event) {
        delnum=document.getElementById('left-name').name;
        choose(event);        
   
    }
    function choose(event){
        document.getElementById('con').setAttribute('style','pointer-events:none;')
        audio1.play();
        deletenum(delnum);
        if(order.length==1) {
            audio2.play();
            var deleteleft = document.getElementById('divleft');
            var deleteright = document.getElementById('divright');
            deleteleft.parentNode.removeChild(deleteleft);
            deleteright.parentNode.removeChild(deleteright);
            document.getElementById('round').innerText="우승자";
            document.getElementById('final').innerHTML='<img src='+event.target.src+' alt="" width=60%">';
            var lastname = document.getElementById('finalname');
            lastname.setAttribute('class', 'display-2 fw-normal text-white bg-danger text-center');
            lastname.innerText=event.target.nextSibling.nextSibling.innerText;
        }   
        else{
            if(order.length==8 || order.length==4 || order.length==2){
               if(order.length==8) {
                document.getElementById('round').innerText="8강";
               }
               else if(order.length==4) {
                document.getElementById('round').innerText="준결승전";
               }
               else if(order.length==2) {
                document.getElementById('round').innerText="결승전";
               }
            currentorder=0;    
            }
            changephoto();
             
        }     

    }
    function deletenum() {
        for(var i=0; i< order.length; i++){
            if(order[i]==delnum) {
                order.splice(i,1);
                i--;
            }
        }
    }
    function changephoto(){
        document.getElementById("left").src=images[order[currentorder]].src;
        document.getElementById("right").src=images[order[currentorder+1]].src;
    }

    let images = [];
    let turn = 0;
    function preload() {
        console.log(preload.arguments.length);
    for(let i = 0; i < preload.arguments.length; i++) {
        images[i] = new Image();
        images[i].src = preload.arguments[i];
        console.log(preload.arguments[i]);
        if(i==15) {
            var removing = document.getElementById('loadicon').firstChild;
            document.getElementById('loadicon').removeChild(removing);
            
        }
    }
    }
    
    function allow() {
        document.getElementById('con').setAttribute('style','pointer-events:true;')
        if(turn==0){
            turn=1;
        }
        else if(turn==1) {
            document.getElementById("left-name").innerText=photoname[order[currentorder]];
            document.getElementById("right-name").innerText=photoname[order[currentorder+1]];
            document.getElementById("left-name").name=order[currentorder];
            document.getElementById("right-name").name=order[currentorder+1];
            currentorder++;
        }
    }
   
   

    window.addEventListener('load', () => {
        photoname=['강동원','공유','김민규','남주혁','박서준','서강준','송강',
        '송중기','안효섭','이종석','정해인','지창욱','차은우','최우식','최현욱',
        '현빈']
        
    preload(
            "./photo/강동원.jpg",'./photo/공유.jpg','./photo/김민규.jpg','./photo/남주혁.jpg','./photo/박서준.jpg','./photo/서강준.jpg',
        './photo/송강.jpg','./photo/송중기.jpg','./photo/안효섭.jpg','./photo/이종석.jpg','./photo/정해인.jpg','./photo/지창욱.jpg','./photo/차은우.jpg',
        './photo/최우식.jpg','./photo/최현욱.jpg','./photo/현빈.jpg'
        )

        for(let i=0; i<16; i++) {
                num=i;
                food[i]=photoname[i];
            }
        for(let i=0; i<16; i++) order.push(i);
        for(let j=0; j<order.length; j++) {
                let k=Math.floor(Math.random() * (j+1));
                [order[j], order[k]] = [order[k], order[j]];
        }
    
        document.getElementById("left").src=images[order[0]].src;
        document.getElementById("right").src=images[order[1]].src;
        document.getElementById("left-name").innerText=photoname[order[0]];
        document.getElementById("right-name").innerText=photoname[order[1]];
        document.getElementById("left-name").name=order[0];
        document.getElementById("right-name").name=order[1];
    }
    );
  </script>

  <body style="background-color:lightgrey;">
    <audio src="./bgm.mp3" autoplay loop></audio>
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom bg-dark">
        <a href="index.html" style="text-decoration-line:none;"><img src="./love-color-text-retro.svg" alt="" width="120" ><span class="fs-2 text-white"> 이상형 월드컵</span></a>
     </header>

    <main>
     
          </div>
            <h1 id="round" class="display-2 fw-normal text-white bg-danger text-center">16강</h1>
            <div id="final" class="text-center"></div>
            <h1 id="finalname"></h1>

   
        
        <div id="con" class="container-fluid">
            <div class="row">
            <div id="loadicon"><h1>Downloading images... Due to very slow loading on GitHub Page, it may take few minutes on the first run... <div class="spinner-border" role="status"></div></h1></div>

                <div id="divleft" class="col-xxl-6" style="padding:0px">
                    <div class="left-box">
                        <img id="left" src="" class="img-fluid" alt="" width=100% onclick="chooseleft(event);">
                        <h1 id="left-name" style="position:relative; bottom:0px;" class="display-2 fw-normal text-white bg-dark text-center"></h1>
                    </div>
                </div>
                <div id="divright" class="col-xxl-6" style="padding:0px">
                    <div class="right-box">
                        <img id="right" name="" src="" class="img-fluid" alt="" width="100%"  onclick="chooseright(event)";  onload="allow()";>
                        <h1 id="right-name" name="" style="position:relative; bottom:0px;" class="display-2 fw-normal text-white bg-dark text-center"></h1>
                    </div>
                </div>
          
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </body>
</html>